{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Kevin/source/repos/Diplomarbeit-EVG/Diplomarbeit-EVG/ClientApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../nav-menu/nav-menu.component\";\nexport class AdmincomponentComponent {\n  //TS Code zum Senden des Files (der Karten)\n  //Methode zum errechnen eines Bytewertes aus einem Foto\n  getByteValueFromImage(imageFile) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = event => {\n        if (event.target && event.target.result) {\n          const image = new Image();\n          image.onload = () => {\n            const canvas = document.createElement('canvas');\n            const context = canvas.getContext('2d');\n            if (!context) {\n              reject(new Error('Canvas 2D context not supported'));\n              return;\n            }\n            canvas.width = image.width;\n            canvas.height = image.height;\n            context.drawImage(image, 0, 0);\n            const imageData = context.getImageData(0, 0, image.width, image.height);\n            const byteData = new Uint8Array(imageData.data.buffer);\n            resolve(byteData);\n          };\n          image.src = event.target.result.toString();\n        } else {\n          reject(new Error('Failed to read image file'));\n        }\n      };\n      reader.readAsDataURL(imageFile);\n    });\n  }\n  sendFileToBackend() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      //Foto holen und den Bytewert aus diesem Foto errechnen, zum weiterleiten\n      const inputElement = document.getElementById('fileInput');\n      var byteValue;\n      if (inputElement && inputElement.files && inputElement.files.length > 0) {\n        const imageFile = inputElement.files[0];\n        try {\n          byteValue = yield _this.getByteValueFromImage(imageFile);\n          /*console.log(byteValue);*/\n        } catch (error) {\n          console.error('Error:', error);\n        }\n      }\n      console.log(byteValue);\n      const url = '/Admin/GetByteFromPicture'; // Ersetze dies mit der tatsächlichen URL deines Backend-Endpunkts\n      return fetch(url, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/octet-stream' // Setze den korrekten Content-Type für Binärdaten\n        },\n\n        body: byteValue\n      }).then(response => {\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n      }).catch(error => {\n        console.error('Error sending byte value to backend:', error);\n        throw error;\n      });\n    })();\n  }\n}\nAdmincomponentComponent.ɵfac = function AdmincomponentComponent_Factory(t) {\n  return new (t || AdmincomponentComponent)();\n};\nAdmincomponentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AdmincomponentComponent,\n  selectors: [[\"app-admincomponent\"]],\n  decls: 18,\n  vars: 0,\n  consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1, shrink-to-fit=no\"], [\"rel\", \"stylesheet\", \"href\", \"https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css\"], [1, \"container\", \"mt-5\"], [3, \"submit\"], [1, \"form-group\"], [\"for\", \"fileInput\"], [\"type\", \"file\", \"id\", \"fileInput\", 1, \"form-control-file\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"]],\n  template: function AdmincomponentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n      i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2)(4, \"link\", 3);\n      i0.ɵɵelementStart(5, \"title\");\n      i0.ɵɵtext(6, \"File Upload Form\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(7, \"body\");\n      i0.ɵɵelement(8, \"app-nav-menu\");\n      i0.ɵɵelementStart(9, \"div\", 4)(10, \"form\", 5);\n      i0.ɵɵlistener(\"submit\", function AdmincomponentComponent_Template_form_submit_10_listener() {\n        return ctx.sendFileToBackend();\n      });\n      i0.ɵɵelementStart(11, \"div\", 6)(12, \"label\", 7);\n      i0.ɵɵtext(13, \"Choose File:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(14, \"input\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"div\", 6);\n      i0.ɵɵelementStart(16, \"button\", 9);\n      i0.ɵɵtext(17, \"Upload File\");\n      i0.ɵɵelementEnd()()()()();\n    }\n  },\n  dependencies: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.NgForm, i2.NavMenuComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["AdmincomponentComponent","getByteValueFromImage","imageFile","Promise","resolve","reject","reader","FileReader","onload","event","target","result","image","Image","canvas","document","createElement","context","getContext","Error","width","height","drawImage","imageData","getImageData","byteData","Uint8Array","data","buffer","src","toString","readAsDataURL","sendFileToBackend","inputElement","getElementById","byteValue","files","length","error","console","log","url","fetch","method","headers","body","then","response","ok","status","catch","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\Kevin\\source\\repos\\Diplomarbeit-EVG\\Diplomarbeit-EVG\\ClientApp\\src\\app\\admincomponent\\admincomponent.component.ts","C:\\Users\\Kevin\\source\\repos\\Diplomarbeit-EVG\\Diplomarbeit-EVG\\ClientApp\\src\\app\\admincomponent\\admincomponent.component.html"],"sourcesContent":["import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-admincomponent',\r\n  templateUrl: './admincomponent.component.html',\r\n  styleUrls: ['./admincomponent.component.css']\r\n})\r\nexport class AdmincomponentComponent\r\n{\r\n  //TS Code zum Senden des Files (der Karten)\r\n\r\n  \r\n\r\n\r\n  //Methode zum errechnen eines Bytewertes aus einem Foto\r\n  getByteValueFromImage(imageFile: File): Promise<Uint8Array> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = (event) => {\r\n      if (event.target && event.target.result) {\r\n        const image = new Image();\r\n        image.onload = () => {\r\n          const canvas = document.createElement('canvas');\r\n          const context = canvas.getContext('2d');\r\n\r\n          if (!context) {\r\n            reject(new Error('Canvas 2D context not supported'));\r\n            return;\r\n          }\r\n\r\n          canvas.width = image.width;\r\n          canvas.height = image.height;\r\n          context.drawImage(image, 0, 0);\r\n\r\n          const imageData = context.getImageData(0, 0, image.width, image.height);\r\n          const byteData = new Uint8Array(imageData.data.buffer);\r\n          resolve(byteData);\r\n        };\r\n\r\n        image.src = event.target.result.toString();\r\n      } else {\r\n        reject(new Error('Failed to read image file'));\r\n      }\r\n    };\r\n\r\n    reader.readAsDataURL(imageFile);\r\n  });\r\n}\r\n\r\n\r\n   async sendFileToBackend() {\r\n    //Foto holen und den Bytewert aus diesem Foto errechnen, zum weiterleiten\r\n    const inputElement = document.getElementById('fileInput') as HTMLInputElement;\r\n    var byteValue;\r\n    if (inputElement && inputElement.files && inputElement.files.length > 0) {\r\n      const imageFile = inputElement.files[0];\r\n      try {\r\n         byteValue = await this.getByteValueFromImage(imageFile);\r\n        /*console.log(byteValue);*/\r\n      } catch (error) {\r\n        console.error('Error:', error);\r\n      }\r\n     }\r\n     console.log(byteValue);\r\n     const url = '/Admin/GetByteFromPicture'; // Ersetze dies mit der tatsächlichen URL deines Backend-Endpunkts\r\n\r\n  return fetch(url, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/octet-stream', // Setze den korrekten Content-Type für Binärdaten\r\n    },\r\n    body: byteValue,\r\n  })\r\n  .then(response => {\r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! Status: ${response.status}`);\r\n    }\r\n  })\r\n  .catch(error => {\r\n    console.error('Error sending byte value to backend:', error);\r\n    throw error;\r\n  });\r\n\r\n  }\r\n\r\n}\r\n","<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, shrink-to-fit=no\">\r\n  <link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css\">\r\n  <title>File Upload Form</title>\r\n</head>\r\n<body>\r\n  <app-nav-menu></app-nav-menu>\r\n  <div class=\"container mt-5\">\r\n    <form (submit)=\"sendFileToBackend()\">\r\n      <div class=\"form-group\">\r\n        <label for=\"fileInput\">Choose File:</label>\r\n        <input type=\"file\" class=\"form-control-file\" id=\"fileInput\">\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"btn btn-primary\">Upload File</button>\r\n    </form>\r\n  </div>\r\n</body>\r\n</html>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}